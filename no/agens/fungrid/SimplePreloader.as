package no.agens.fungrid {	import flash.events.Event;	import flash.display.DisplayObject;		public class SimplePreloader {		private var swf:DisplayObject;		private var loadingEnterFrameFunction:Function;		private var loadingCompletedFunction:Function;		private var delayCompletedFunction:Function;		private var delayCounter:uint;		private var delayTarget:uint;		public var percentLoaded:Number = 0;		public function SimplePreloader(swf:DisplayObject, loadingCompletedFunction:Function, loadingEnterFrameFunction:Function=null) {			this.swf = swf;			this.loadingCompletedFunction = loadingCompletedFunction;			this.loadingEnterFrameFunction = loadingEnterFrameFunction;			swf.addEventListener(Event.ENTER_FRAME, loading);		}		private function loading(e:Event):void {			percentLoaded = 100*swf.loaderInfo.bytesLoaded/swf.loaderInfo.bytesTotal;			if (loadingEnterFrameFunction!=null) {				loadingEnterFrameFunction();			}			if (percentLoaded>=100) {				swf.removeEventListener(Event.ENTER_FRAME, loading);				loadingCompletedFunction();			}		}		public function delayAndCall(frames:uint, delayCompletedFunction:Function):void {			this.delayCompletedFunction = delayCompletedFunction;			delayCounter = 0;			delayTarget = frames;			swf.addEventListener(Event.ENTER_FRAME, delaying);		}		private function delaying(e:Event):void {			delayCounter += 1;			if (delayCounter==delayTarget) {				swf.removeEventListener(Event.ENTER_FRAME, delaying);				delayCompletedFunction();			}		}	}	}